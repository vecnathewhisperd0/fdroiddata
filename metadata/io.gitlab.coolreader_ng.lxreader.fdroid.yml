Categories:
  - Reading
License: GPL-3.0-or-later
AuthorName: Aleksey Chernov
AuthorEmail: valexlin@gmail.com
SourceCode: https://gitlab.com/coolreader-ng/lxreader
IssueTracker: https://gitlab.com/coolreader-ng/lxreader/-/issues

AutoName: LxReader

RepoType: git
Repo: https://gitlab.com/coolreader-ng/lxreader.git

Builds:
  - versionName: 0.7.7 (fdroid)
    versionCode: 70700
    commit: b5c67d1fabba6de087b6b6ec31235fed527f9ee4
    subdir: app
    sudo:
      - apt-get update
      - apt-get install -y xz-utils bzip2
    gradle:
      - fdroid
    prebuild:
      - sdkmanager 'cmake;3.22.1'
      - find ../tools -iname *.sh -exec sed -i -e 's/VERBOSE=1//' -e 's/-xvjf/-xjf/'
        {} +
    build:
      - echo ANDROID_HOME=$$SDK$$ >> ./make.conf
      - echo ANDROID_NDK_HOST_TAG=linux-x86_64 >> ./make.conf
      - echo ANDROID_NDK_ROOT=$$NDK$$ >> ./make.conf
      - echo ANDROID_CMAKE=$$SDK$$/cmake/3.22.1 >> ./make.conf
      - echo MAKEOPTS=-j`nproc` >> ./make.conf
      - echo ANDROID_PAGE_SIZE_16K=OFF >> ./make.conf
      - cp make.conf ../tools/thirdparty-bldtool/
      - pushd ../tools/thirdparty-bldtool/
      - echo -e 'CFLAGS="-fPIC -DPIC"\nCXXFLAGS="-fPIC -DPIC"' >> ./make.conf
      - ./rebuild-all.sh
      - popd
      - cp make.conf ../tools/crengine-ng-build/
      - pushd ../tools/crengine-ng-build/
      - ./rebuild-all.sh release
      - popd
    ndk: r21e

AutoUpdateMode: Version
UpdateCheckMode: Tags
CurrentVersion: 0.7.7 (fdroid)
CurrentVersionCode: 70700
