AntiFeatures:
  - UpstreamNonFree
Categories:
  - Internet
License: Apache-2.0
WebSite: https://about.mattermost.com/
SourceCode: https://github.com/mattermost/mattermost-mobile
IssueTracker: https://github.com/mattermost/mattermost-mobile/issues
Changelog: https://docs.mattermost.com/about/mobile-app-changelog.html

AutoName: Mattermost Beta

RepoType: git
Repo: https://github.com/mattermost/mattermost-mobile.git

Builds:
  - versionName: 1.19.0
    versionCode: 193
    commit: v1.19.0
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288
      - sysctl -p
      - apt-get update
      - apt-get install -y --no-install-recommends -t stretch-backports npm
    init:
      - sed -i -e '/react-native-youtube/d' ../../package.json build.gradle ../settings.gradle
        ../../app/components/post_body_additional_content/post_body_additional_content.js
      - make -C ../.. pre-run
    gradle:
      - yes
    rm:
      - node_modules/react-native-notifications/android/src/main/java/com/wix/reactnativenotifications/gcm/
      - node_modules/sc-uws/*.node
      - node_modules/sc-uws/build/
      - node_modules/xdate/build/compiler.jar
      - node_modules/react-native-video/android-exoplayer/build/
      - node_modules/socketcluster/
      - node_modules/shaka-player/third_party/closure/compiler.jar
      - node_modules/.bin/socketcluster
    prebuild:
      - "sed -i -e '/play-services-gcm/,+2d' -e 's/bundleCommand: \"ram-bundle\",/bundleCommand:\
        \ \"ram-bundle\", nodeExecutableAndArgs: [\"node\", \"--max-old-space-size=12000\"\
        ],/' build.gradle"
      - sed -i -e '/ReactNativeYouTube/d' src/main/java/com/mattermost/rnbeta/MainApplication.java
      - sed -i -e '/com.google.android.gms.iid.InstanceID.getInstance/d' ../../node_modules/react-native-device-info/android/src/main/java/com/learnium/RNDeviceInfo/RNDeviceModule.java
      - sed -i -e '/play-services/d' ../../node_modules/react-native-device-info/android/build.gradle
      - sed -i -e '/firebase/d' ../../node_modules/react-native-notifications/android/build.gradle
        build.gradle
      - sed -i -e '/hasPermission/d' -e '/tokenFetchIntent/d' -e '/FcmInstance/d'
        -e '/FirebaseApp/'d ../../node_modules/react-native-notifications/android/src/main/java/com/wix/reactnativenotifications/RNNotificationsModule.java
        ../../node_modules/react-native-notifications/android/src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/maven {/,+2d' ../../node_modules/react-native-document-picker/android/build.gradle
      - truncate -s 0 ../../node_modules/react-native/local-cli/server/util/external/xsel
    scanignore:
      - android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-navigation/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
    scandelete:
      - node_modules

  - versionName: 1.55.0
    versionCode: 418
    commit: cbee2449e25b0ef75c349d2bfd7d759d205ee61c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.xz https://nodejs.org/dist/v16.16.0/node-v16.16.0-linux-x64.tar.xz
      - echo "edcb6e9bb049ae365611aa209fc03c4bfc7e0295dbcc5b2f1e710ac70384a8ec node.tar.xz"
        | sha256sum -c -
      - tar xJf node.tar.xz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-youtube/d' -e 's|git://github.com/||' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    srclibs:
      - react-native-reanimated@2.3.1
    rm:
      - ios
      - patches/react-native-youtube*
      - app/components/post_list/post/body/content/youtube/
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' -e '/enableSeparateBuildPerCPUArchitecture/d'
        build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/if (isYoutubeLink/,/^\s\{8\}}/d' -e '/YouTube/d' app/components/post_list/post/body/content/index.tsx
      - sed -i -e '/dependencies {/a implementation "ch.threema:webrtc-android:100.0.0"'
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/hermes-engine
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/@react-native-community/masked-view/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-async-storage/async-storage/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-mmkv-storage/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
      - pushd $$react-native-reanimated$$
      - yarn add react-native@0.67.2
      - gradle :assembleRelease
      - popd
      - mv $$react-native-reanimated$$/build/outputs/aar/android-release.aar ../../node_modules/react-native-reanimated/android/react-native-reanimated-67-jsc.aar
    ndk: r21e

  - versionName: 1.55.1
    versionCode: 423
    commit: ba5b3eebef83d13e2abd70f0a1959061ab24b544
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.xz https://nodejs.org/dist/v16.16.0/node-v16.16.0-linux-x64.tar.xz
      - echo "edcb6e9bb049ae365611aa209fc03c4bfc7e0295dbcc5b2f1e710ac70384a8ec node.tar.xz"
        | sha256sum -c -
      - tar xJf node.tar.xz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-youtube/d' -e 's|git://github.com/||' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    srclibs:
      - react-native-reanimated@2.3.1
    rm:
      - ios
      - patches/react-native-youtube*
      - app/components/post_list/post/body/content/youtube/
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' -e '/enableSeparateBuildPerCPUArchitecture/d'
        build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/if (isYoutubeLink/,/^\s\{8\}}/d' -e '/YouTube/d' app/components/post_list/post/body/content/index.tsx
      - sed -i -e '/dependencies {/a implementation "ch.threema:webrtc-android:100.0.0"'
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/hermes-engine
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/@react-native-community/masked-view/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-async-storage/async-storage/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-mmkv-storage/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
      - pushd $$react-native-reanimated$$
      - yarn add react-native@0.67.2
      - gradle :assembleRelease
      - popd
      - mv $$react-native-reanimated$$/build/outputs/aar/android-release.aar ../../node_modules/react-native-reanimated/android/react-native-reanimated-67-jsc.aar
    ndk: r21e

  - versionName: 2.0.0
    versionCode: 44901
    commit: 69e27ae812669e57b6c1b055089bc87a2119bc4c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.0.0
    versionCode: 44902
    commit: 69e27ae812669e57b6c1b055089bc87a2119bc4c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.0.0
    versionCode: 44903
    commit: 69e27ae812669e57b6c1b055089bc87a2119bc4c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.0.0
    versionCode: 44904
    commit: 69e27ae812669e57b6c1b055089bc87a2119bc4c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.0.0
    versionCode: 45201
    commit: 70119fc0263835377d04dd12a8cedcb2d8ab38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.0.0
    versionCode: 45202
    commit: 70119fc0263835377d04dd12a8cedcb2d8ab38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.0.0
    versionCode: 45203
    commit: 70119fc0263835377d04dd12a8cedcb2d8ab38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.0.0
    versionCode: 45204
    commit: 70119fc0263835377d04dd12a8cedcb2d8ab38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.12.1/node-v18.12.1-linux-x64.tar.gz
      - echo "a8fcacb8033504e6d704bdee821f7005ee3774db25c799bcf2a13b5bda7de172  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs:["node","--max-old-space-size=12000"],'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - android/build.gradle
      - node_modules/jsc-android
      - node_modules/react-native/android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native/ReactAndroid/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native/ReactAndroid/hermes-engine/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r21e
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.0.1
    versionCode: 45501
    commit: b9b299186112c0134e33195a99e394d148e982f5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.0/node-v18.14.0-linux-x64.tar.gz
      - echo "bcdfd28bb7ab9a53c7045e0862556f77c250580c6d3d6cb960843895e024cac6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.0.1
    versionCode: 45502
    commit: b9b299186112c0134e33195a99e394d148e982f5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.0/node-v18.14.0-linux-x64.tar.gz
      - echo "bcdfd28bb7ab9a53c7045e0862556f77c250580c6d3d6cb960843895e024cac6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.0.1
    versionCode: 45503
    commit: b9b299186112c0134e33195a99e394d148e982f5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.0/node-v18.14.0-linux-x64.tar.gz
      - echo "bcdfd28bb7ab9a53c7045e0862556f77c250580c6d3d6cb960843895e024cac6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.0.1
    versionCode: 45504
    commit: b9b299186112c0134e33195a99e394d148e982f5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.0/node-v18.14.0-linux-x64.tar.gz
      - echo "bcdfd28bb7ab9a53c7045e0862556f77c250580c6d3d6cb960843895e024cac6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:104.0.0'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.1.0
    versionCode: 45701
    commit: 5d653c4e195984fff3f5ddc735bbe33c4001a06c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.1.0
    versionCode: 45702
    commit: 5d653c4e195984fff3f5ddc735bbe33c4001a06c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.1.0
    versionCode: 45703
    commit: 5d653c4e195984fff3f5ddc735bbe33c4001a06c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.1.0
    versionCode: 45704
    commit: 5d653c4e195984fff3f5ddc735bbe33c4001a06c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.2.0
    versionCode: 46201
    commit: f6c20b764b279d829f104581ab4d5f603478813a
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.2.0
    versionCode: 46202
    commit: f6c20b764b279d829f104581ab4d5f603478813a
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.2.0
    versionCode: 46203
    commit: f6c20b764b279d829f104581ab4d5f603478813a
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.2.0
    versionCode: 46204
    commit: f6c20b764b279d829f104581ab4d5f603478813a
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.3.0
    versionCode: 46501
    commit: d466b4c41bccc4ac9d6f5ca57646c2d2ac219678
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.3.0
    versionCode: 46502
    commit: d466b4c41bccc4ac9d6f5ca57646c2d2ac219678
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.3.0
    versionCode: 46503
    commit: d466b4c41bccc4ac9d6f5ca57646c2d2ac219678
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.3.0
    versionCode: 46504
    commit: d466b4c41bccc4ac9d6f5ca57646c2d2ac219678
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e "/dependencies {/a implementation 'im.conversations.webrtc:webrtc-android:108.0.1'"
        node_modules/react-native-webrtc/android/build.gradle
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/jsc-android
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/@react-native-community/datetimepicker/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-mailer/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.4.0
    versionCode: 47101
    commit: 1569e75f957b5e3289507a44e1e84a720bcea4e0
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.4.0
    versionCode: 47102
    commit: 1569e75f957b5e3289507a44e1e84a720bcea4e0
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.4.0
    versionCode: 47103
    commit: 1569e75f957b5e3289507a44e1e84a720bcea4e0
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.4.0
    versionCode: 47104
    commit: 1569e75f957b5e3289507a44e1e84a720bcea4e0
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.5.0
    versionCode: 47501
    commit: f1a87e2f83cba4f8633a06ab476bbd0cd3662fc5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.5.0
    versionCode: 47502
    commit: f1a87e2f83cba4f8633a06ab476bbd0cd3662fc5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.5.0
    versionCode: 47503
    commit: f1a87e2f83cba4f8633a06ab476bbd0cd3662fc5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.5.0
    versionCode: 47504
    commit: f1a87e2f83cba4f8633a06ab476bbd0cd3662fc5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.5.1
    versionCode: 47601
    commit: b2e101f0a24e11580a7f94cbd548570a9e59b4dd
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.5.1
    versionCode: 47602
    commit: b2e101f0a24e11580a7f94cbd548570a9e59b4dd
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.5.1
    versionCode: 47603
    commit: b2e101f0a24e11580a7f94cbd548570a9e59b4dd
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.5.1
    versionCode: 47604
    commit: b2e101f0a24e11580a7f94cbd548570a9e59b4dd
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx4096m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-document-picker/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.6.0
    versionCode: 47901
    commit: 02a702efe9bc0442021348cbc972e8dcefe39dd1
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.6.0
    versionCode: 47902
    commit: 02a702efe9bc0442021348cbc972e8dcefe39dd1
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.6.0
    versionCode: 47903
    commit: 02a702efe9bc0442021348cbc972e8dcefe39dd1
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.6.0
    versionCode: 47904
    commit: 02a702efe9bc0442021348cbc972e8dcefe39dd1
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.7.0
    versionCode: 48201
    commit: ee03c177c2c696124b992c58a61f2c678cadc0b5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.7.0
    versionCode: 48202
    commit: ee03c177c2c696124b992c58a61f2c678cadc0b5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.7.0
    versionCode: 48203
    commit: ee03c177c2c696124b992c58a61f2c678cadc0b5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.7.0
    versionCode: 48204
    commit: ee03c177c2c696124b992c58a61f2c678cadc0b5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.8.0
    versionCode: 48401
    commit: 5524b7932e516d91530d4d1b90a91f6a3e73f150
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.8.0
    versionCode: 48402
    commit: 5524b7932e516d91530d4d1b90a91f6a3e73f150
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.8.0
    versionCode: 48403
    commit: 5524b7932e516d91530d4d1b90a91f6a3e73f150
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.8.0
    versionCode: 48404
    commit: 5524b7932e516d91530d4d1b90a91f6a3e73f150
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.14.1/node-v18.14.1-linux-x64.tar.gz
      - echo "6a7c6862b86cb01b892ca5967dba14bd3122dbfed9d5c9fedd30585d5974f1f6  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@7
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -i -e '/bintray/d' node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@rudderstack/rudder-sdk-react-native/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.8.1
    versionCode: 48701
    commit: 00fe9ea7b8b96051f7c4b87ea3a80acca1f05637
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.8.1
    versionCode: 48702
    commit: 00fe9ea7b8b96051f7c4b87ea3a80acca1f05637
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.8.1
    versionCode: 48703
    commit: 00fe9ea7b8b96051f7c4b87ea3a80acca1f05637
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.8.1
    versionCode: 48704
    commit: 00fe9ea7b8b96051f7c4b87ea3a80acca1f05637
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.8.2
    versionCode: 48801
    commit: 2fc3600a6567f6cc2ef4d2cfb084fb39180214e6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.8.2
    versionCode: 48802
    commit: 2fc3600a6567f6cc2ef4d2cfb084fb39180214e6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.8.2
    versionCode: 48803
    commit: 2fc3600a6567f6cc2ef4d2cfb084fb39180214e6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.8.2
    versionCode: 48804
    commit: 2fc3600a6567f6cc2ef4d2cfb084fb39180214e6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.9.0
    versionCode: 48901
    commit: 579da2c96f514eadfea981dfcc99c582df051ba2
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.9.0
    versionCode: 48902
    commit: 579da2c96f514eadfea981dfcc99c582df051ba2
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.9.0
    versionCode: 48903
    commit: 579da2c96f514eadfea981dfcc99c582df051ba2
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.9.0
    versionCode: 48904
    commit: 579da2c96f514eadfea981dfcc99c582df051ba2
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.10.0
    versionCode: 49201
    commit: 1f90540d9565d82be5bbec1c55d02b5ccd3a1f65
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.10.0
    versionCode: 49202
    commit: 1f90540d9565d82be5bbec1c55d02b5ccd3a1f65
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.10.0
    versionCode: 49203
    commit: 1f90540d9565d82be5bbec1c55d02b5ccd3a1f65
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.10.0
    versionCode: 49204
    commit: 1f90540d9565d82be5bbec1c55d02b5ccd3a1f65
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.10.1
    versionCode: 49601
    commit: 94d4a231472cf648b952671478644c3f27ad379d
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.10.1
    versionCode: 49602
    commit: 94d4a231472cf648b952671478644c3f27ad379d
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.10.1
    versionCode: 49603
    commit: 94d4a231472cf648b952671478644c3f27ad379d
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.10.1
    versionCode: 49604
    commit: 94d4a231472cf648b952671478644c3f27ad379d
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.11.0
    versionCode: 50001
    commit: b645c2bc2ebe758d6ee905d00faafc62ca62d821
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.11.0
    versionCode: 50002
    commit: b645c2bc2ebe758d6ee905d00faafc62ca62d821
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.11.0
    versionCode: 50003
    commit: b645c2bc2ebe758d6ee905d00faafc62ca62d821
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.11.0
    versionCode: 50004
    commit: b645c2bc2ebe758d6ee905d00faafc62ca62d821
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.12.1
    versionCode: 50501
    commit: 0958bdd875d5b4cc9137a21d92916aeebd5635e3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.12.1
    versionCode: 50502
    commit: 0958bdd875d5b4cc9137a21d92916aeebd5635e3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.12.1
    versionCode: 50503
    commit: 0958bdd875d5b4cc9137a21d92916aeebd5635e3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.12.1
    versionCode: 50504
    commit: 0958bdd875d5b4cc9137a21d92916aeebd5635e3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.12.2
    versionCode: 50601
    commit: 45efa423756d78b9326a80d79298f04d929db784
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.12.2
    versionCode: 50602
    commit: 45efa423756d78b9326a80d79298f04d929db784
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.12.2
    versionCode: 50603
    commit: 45efa423756d78b9326a80d79298f04d929db784
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.12.2
    versionCode: 50604
    commit: 45efa423756d78b9326a80d79298f04d929db784
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.13.0
    versionCode: 50701
    commit: 954188b3e9171be6fe40bfc70233e94a8b5f38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.13.0
    versionCode: 50702
    commit: 954188b3e9171be6fe40bfc70233e94a8b5f38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.13.0
    versionCode: 50703
    commit: 954188b3e9171be6fe40bfc70233e94a8b5f38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.13.0
    versionCode: 50704
    commit: 954188b3e9171be6fe40bfc70233e94a8b5f38de
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v18.18.0/node-v18.18.0-linux-x64.tar.gz
      - echo "8aae62b6b3a5d659459c35c51e4373b950d11595a273db16c6162c712c5533a2 node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
      - npm -g install yarn
      - npm -g install npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.14.0
    versionCode: 50901
    commit: 8d7a104f79a14f7841814e1560891da7de0ce506
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.14.0
    versionCode: 50902
    commit: 8d7a104f79a14f7841814e1560891da7de0ce506
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.14.0
    versionCode: 50903
    commit: 8d7a104f79a14f7841814e1560891da7de0ce506
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.14.0
    versionCode: 50904
    commit: 8d7a104f79a14f7841814e1560891da7de0ce506
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.15.0
    versionCode: 51201
    commit: e0429bd5210133ba04bd770d1f5c30cda386d436
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.15.0
    versionCode: 51202
    commit: e0429bd5210133ba04bd770d1f5c30cda386d436
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.15.0
    versionCode: 51203
    commit: e0429bd5210133ba04bd770d1f5c30cda386d436
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.15.0
    versionCode: 51204
    commit: e0429bd5210133ba04bd770d1f5c30cda386d436
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: r23b
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.16.0
    versionCode: 51801
    commit: d208c6c3b7a2cae170f3e4f47d14639d4d413bcf
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: 23.1.7779620
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.16.0
    versionCode: 51802
    commit: d208c6c3b7a2cae170f3e4f47d14639d4d413bcf
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: 23.1.7779620
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.16.0
    versionCode: 51803
    commit: d208c6c3b7a2cae170f3e4f47d14639d4d413bcf
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: 23.1.7779620
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.16.0
    versionCode: 51804
    commit: d208c6c3b7a2cae170f3e4f47d14639d4d413bcf
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    ndk: 23.1.7779620
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.17.0
    versionCode: 52501
    commit: 850a3d5d2a9782f5e6c589ecca90a7cf01099534
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.17.0
    versionCode: 52502
    commit: 850a3d5d2a9782f5e6c589ecca90a7cf01099534
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.17.0
    versionCode: 52503
    commit: 850a3d5d2a9782f5e6c589ecca90a7cf01099534
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.17.0
    versionCode: 52504
    commit: 850a3d5d2a9782f5e6c589ecca90a7cf01099534
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.17.1
    versionCode: 52901
    commit: 1a2faccb7fb58a79aab832e151245aee06309c22
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.17.1
    versionCode: 52902
    commit: 1a2faccb7fb58a79aab832e151245aee06309c22
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.17.1
    versionCode: 52903
    commit: 1a2faccb7fb58a79aab832e151245aee06309c22
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.17.1
    versionCode: 52904
    commit: 1a2faccb7fb58a79aab832e151245aee06309c22
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.18.1
    versionCode: 53601
    commit: 28b2b9d90a617f982d91ebcf38afd38034f7a880
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.18.1
    versionCode: 53602
    commit: 28b2b9d90a617f982d91ebcf38afd38034f7a880
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.18.1
    versionCode: 53603
    commit: 28b2b9d90a617f982d91ebcf38afd38034f7a880
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.18.1
    versionCode: 53604
    commit: 28b2b9d90a617f982d91ebcf38afd38034f7a880
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/react-native-in-app-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' build.gradle
      - sed -i -e '/gms/d' ../build.gradle build.gradle ../buildscript-gradle.lockfile
      - sed -i -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
      - sed -i -e '/bundleCommand/a nodeExecutableAndArgs = ["node","--max-old-space-size=12000"]'
        -e '/firebase/d' -e '/detox/d' build.gradle
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/InAppReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/InAppReview.isAvailable()/false/' -e '/InAppReview/d' app/utils/reviews.ts
      - sed -E -i '/installreferrer/,+11d' node_modules/react-native-device-info/android/build.gradle
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-create-thumbnail/android/build.gradle
      - node_modules/react-native-device-info/android/build.gradle
      - node_modules/react-native-fast-image/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-linear-gradient/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-webview/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.19.0
    versionCode: 54401
    commit: 043d5291433127b7a5076463d01f2f9264e02b0c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.19.0
    versionCode: 54402
    commit: 043d5291433127b7a5076463d01f2f9264e02b0c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.19.0
    versionCode: 54403
    commit: 043d5291433127b7a5076463d01f2f9264e02b0c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.19.0
    versionCode: 54404
    commit: 043d5291433127b7a5076463d01f2f9264e02b0c
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.19.2
    versionCode: 55401
    commit: 347b73a41f796218791f646ce4393c118510ab97
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.19.2
    versionCode: 55402
    commit: 347b73a41f796218791f646ce4393c118510ab97
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.19.2
    versionCode: 55403
    commit: 347b73a41f796218791f646ce4393c118510ab97
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.19.2
    versionCode: 55404
    commit: 347b73a41f796218791f646ce4393c118510ab97
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.20.0
    versionCode: 55601
    commit: 143ad2c92ae560fda832117b2d1870eabbb49ca3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.20.0
    versionCode: 55602
    commit: 143ad2c92ae560fda832117b2d1870eabbb49ca3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.20.0
    versionCode: 55603
    commit: 143ad2c92ae560fda832117b2d1870eabbb49ca3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.20.0
    versionCode: 55604
    commit: 143ad2c92ae560fda832117b2d1870eabbb49ca3
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.20.1
    versionCode: 56401
    commit: 4ad0403a49b734fb005fd9685002a186b05476b6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.20.1
    versionCode: 56402
    commit: 4ad0403a49b734fb005fd9685002a186b05476b6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.20.1
    versionCode: 56403
    commit: 4ad0403a49b734fb005fd9685002a186b05476b6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.20.1
    versionCode: 56404
    commit: 4ad0403a49b734fb005fd9685002a186b05476b6
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

  - versionName: 2.21.0
    versionCode: 56501
    commit: b3e7733ccebce588e9429f0cf00c0eb26bc484c5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-armeabi-v7a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=armeabi-v7a

  - versionName: 2.21.0
    versionCode: 56502
    commit: b3e7733ccebce588e9429f0cf00c0eb26bc484c5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86

  - versionName: 2.21.0
    versionCode: 56503
    commit: b3e7733ccebce588e9429f0cf00c0eb26bc484c5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-arm64-v8a-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=arm64-v8a

  - versionName: 2.21.0
    versionCode: 56504
    commit: b3e7733ccebce588e9429f0cf00c0eb26bc484c5
    subdir: android/app
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - apt-get update
      - apt-get install -y npm
      - npm -g install yarn npm@9
    init:
      - cd ../..
      - sed -i -e '/expo-store-review/d' package.json
      - sed -i -e "/fs.existsSync('dist')/,+2d" scripts/generate-assets.js
      - mkdir -p dist/assets
      - sed -i -e '/mmjstool":\ {/,/^    },/d' package-lock.json
      - npm install --ignore-scripts --build-from-source
    gradle:
      - yes
    output: build/outputs/apk/release/app-x86_64-release-unsigned.apk
    rm:
      - ios
      - node_modules/react-native-notifications/lib/android/app/src/main/java/com/wix/reactnativenotifications/fcm/FcmInstanceIdListenerService.java
    prebuild:
      - sed -i -e 's/Xmx2048m/Xmx8092m/' ../gradle.properties
      - sed -i -e 's/versionCode .*/versionCode $$VERCODE$$/' -e 's/universalApk .*/universalApk
        false/' -e '/applicationVariants/,+12d' -e '/bundleCommand/a nodeExecutableAndArgs
        = ["node","--max-old-space-size=12000"]' -e '/firebase/d' -e '/detox/d' build.gradle
      - sed -i -e '/gms/d' -e 's|$rootDir.*Detox-android|https://jitpack.io|' ../build.gradle
        build.gradle ../buildscript-gradle.lockfile
      - cd ../..
      - npx patch-package --error-on-fail
      - sed -i -e '/requestReview/d' app/screens/review_app/index.tsx
      - sed -i -e 's/await isAvailableAsync()/false/' -e '/isAvailableAsync/d' app/utils/reviews.ts
      - sed -i -e '/extension-ima/d' node_modules/react-native-video/android/build.gradle
      - sed -i -e '/installreferrer/d' node_modules/expo-application/android/build.gradle
      - sed -i -e '/com.android.installreferrer.api/d' -e '/StringBuilder()/,/^      })/d'
        -e '/getInstallReferrerAsync/apromise.resolve("")' node_modules/expo-application/android/src/main/java/expo/modules/application/ApplicationModule.kt
      - sed -i -e 's|maven.fabric.io/public|jitpack.io|' node_modules/react-native-math-view/android/build.gradle
      - sed -i -e 's|def command =.*sdkmanager|def command = "sdkmanager|' node_modules/react-native-navigation/lib/android/app/build.gradle
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf assets/fonts/
      - cp node_modules/@mattermost/compass-icons/font/compass-icons.ttf android/app/src/main/assets/fonts
      - cd node_modules/react-native-notifications/lib/android/app
      - sed -i -e '/firebase-messaging/d' build.gradle
      - sed -i -e '/google-services/d' ../build.gradle
      - sed -i -e '/FcmInstanceIdListenerService/,/<service/d' src/main/AndroidManifest.xml
      - sed -i -e '/FirebaseApp/d' src/main/java/com/wix/reactnativenotifications/RNNotificationsPackage.java
      - sed -i -e '/FirebaseMessaging.getInstance/,/});/d' -e '/FirebaseMessaging/d'
        src/main/java/com/wix/reactnativenotifications/fcm/FcmToken.java
    scanignore:
      - libraries/@mattermost/hardware-keyboard/android/build.gradle
      - libraries/@mattermost/rnshare/android/build.gradle
      - libraries/@mattermost/rnutils/android/build.gradle
      - node_modules/detox/android/build.gradle
      - node_modules/detox/android/detox/publishing.gradle
      - node_modules/expo-modules-autolinking/scripts/android/autolinking_implementation.gradle
      - node_modules/expo-modules-core/android/ExpoModulesCorePlugin.gradle
      - node_modules/jsc-android
      - node_modules/@mattermost/react-native-emm/android/build.gradle
      - node_modules/@mattermost/react-native-network-client/android/build.gradle
      - node_modules/@mattermost/react-native-paste-input/android/build.gradle
      - node_modules/@mattermost/react-native-turbo-log/android/build.gradle
      - node_modules/@react-native-camera-roll/camera-roll/android/build.gradle
      - node_modules/@react-native-community/netinfo/android/build.gradle
      - node_modules/@react-native-cookies/cookies/android/build.gradle
      - node_modules/react-native-haptic-feedback/android/build.gradle
      - node_modules/react-native-image-picker/android/build.gradle
      - node_modules/react-native-localize/android/build.gradle
      - node_modules/react-native-math-view/android/build.gradle
      - node_modules/react-native-navigation/lib/android/build.gradle
      - node_modules/react-native-notifications/lib/android/build.gradle
      - node_modules/react-native-performance/android/build.gradle
      - node_modules/react-native-permissions/android/build.gradle
      - node_modules/react-native-reanimated/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
      - node_modules/react-native-share/android/build.gradle
      - node_modules/react-native-svg/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native-video/android/build.gradle
      - node_modules/@stream-io/flat-list-mvcp/android/build.gradle
    scandelete:
      - node_modules
    build:
      - pushd ../..
      - node scripts/generate-assets.js
      - ./node_modules/.bin/jetify
      - popd
    gradleprops:
      - separateApk=true
      - reactNativeArchitectures=x86_64

MaintainerNotes: scanner might detect 'com/google/ads/interactivemedia/v3/api/AdEvent'
  stubs from react-native-video

AutoUpdateMode: Version
UpdateCheckMode: Tags
VercodeOperation:
  - 100 * %c + 1
  - 100 * %c + 2
  - 100 * %c + 3
  - 100 * %c + 4
CurrentVersion: 2.21.0
CurrentVersionCode: 56504
