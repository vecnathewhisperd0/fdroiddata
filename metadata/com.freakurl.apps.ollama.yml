Categories:
  - Connectivity
  - Internet
License: Apache-2.0
AuthorName: JHubi1
AuthorEmail: me@jhubi1.com
AuthorWebSite: https://jhubi1.com
SourceCode: https://github.com/JHubi1/ollama-app
IssueTracker: https://github.com/JHubi1/ollama-app/issues
Translation: https://crowdin.com/project/ollama-app

AutoName: Ollama

RepoType: git
Repo: https://github.com/JHubi1/ollama-app
Binaries: https://github.com/JHubi1/ollama-app/releases/download/%v/ollama-android-v%v.apk

Builds:
  - versionName: 1.2.0
    versionCode: 9
    commit: d670072a69400a3f30f4605534e648e1a5b3e6ec
    sudo:
      - mkdir -p /home/runner
      - chown vagrant /home/runner
    output: build/app/outputs/flutter-apk/app-release.apk
    srclibs:
      - flutter@stable
    rm:
      - linux
      - test
      - web
      - windows
      - windows_installer
    prebuild:
      - flutterVersion=$(sed -n -E 's/.*flutter-version:\ (.*)/\1/p' .github/workflows/build.yaml
        | head -n 1)
      - '[[ $flutterVersion ]] || exit 1'
      - git -C $$flutter$$ checkout -f $flutterVersion
      - export repo=/home/runner/work/ollama-app
      - mkdir -p $repo
      - cd ..
      - mv com.freakurl.apps.ollama $repo/ollama-app
      - pushd $repo/ollama-app
      - export PUB_CACHE=$(pwd)/.pub-cache
      - $$flutter$$/bin/flutter config --no-analytics
      - $$flutter$$/bin/flutter pub get
      - popd
      - mv $repo/ollama-app com.freakurl.apps.ollama
    scandelete:
      - .pub-cache
      - assets
    build:
      - export repo=/home/runner/work/ollama-app
      - cd ..
      - mv com.freakurl.apps.ollama $repo/ollama-app
      - pushd $repo/ollama-app
      - export PUB_CACHE=$(pwd)/.pub-cache
      - $$flutter$$/bin/flutter build apk --obfuscate --split-debug-info=build\debugAndroid
      - popd
      - mv $repo/ollama-app com.freakurl.apps.ollama

AllowedAPKSigningKeys: 742d4d30a72f752f122edbc0ca8361182854999fe5eacc128709ebdf2b167507

AutoUpdateMode: Version
UpdateCheckMode: Tags
UpdateCheckData: pubspec.yaml|version:\s.+\+(\d+)|.|version:\s(.+)\+
CurrentVersion: 1.2.0
CurrentVersionCode: 9
